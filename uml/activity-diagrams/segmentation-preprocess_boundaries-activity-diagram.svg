<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1025px" preserveAspectRatio="none" style="width:767px;height:1025px;" version="1.1" viewBox="0 0 767 1025" width="767px" zoomAndPan="magnify"><defs><linearGradient id="gj4rfkvpb3lyo0" x1="0%" x2="100%" y1="50%" y2="50%"><stop offset="0%" stop-color="#FFFFFF"/><stop offset="100%" stop-color="#FFFFFF"/></linearGradient><filter height="300%" id="fj4rfkvpb3lyo" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter><filter height="1" id="bj4rfkvpb3lyo0" width="1" x="0" y="0"><feFlood flood-color="#87CEEB" result="flood"/><feComposite in="SourceGraphic" in2="flood" operator="over"/></filter></defs><g><rect fill="url(#gj4rfkvpb3lyo0)" height="1025" style="stroke: none; stroke-width: 1.0;" width="767" x="0" y="0"/><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="248" x="118.25" y="26.708">Nuspell - segmentation -</text><text fill="#000000" font-family="monospace" font-size="18" font-style="italic" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="275" x="372.25" y="26.708">_preprocess_boundaries(s)</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="0" x="385.75" y="47.6611"/><path d="M10,51.9063 L10,288.8984 L367,288.8984 L367,61.9063 L357,51.9063 L10,51.9063 " fill="#FFFFFF" filter="url(#fj4rfkvpb3lyo)" style="stroke: #000000; stroke-width: 1.0;"/><path d="M357,51.9063 L357,61.9063 L367,61.9063 L357,51.9063 " fill="#FFFFFF" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="16" y="68.9731">Preprocesses WB4.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="20" y="84.106"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="8" x="16" y="99.2388">s</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="28" y="99.2388">must be a Unicode code point string</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="20" y="114.3716"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="16" y="129.5044">assert({(0, "CR"), (1, "LF")} ==</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="16" y="144.6372">_preprocess_boundaries("\r\n"));</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="20" y="159.77"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="336" x="16" y="174.9028">assert({(0, "ALetter"), (2, "ALetter")} ==</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="16" y="190.0356">_preprocess_boundaries("A\u0308A"));</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="20" y="205.1685"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="16" y="220.3013">assert({(0, "LF"), (1, "Format")} ==</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="16" y="235.4341">_preprocess_boundaries("\n\u2060"));</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="20" y="250.5669"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="304" x="16" y="265.6997">assert({(0, "Other"), (2, "Other")} ==</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="336" x="16" y="280.8325">_preprocess_boundaries("\x01\u0308\x01"));</text><ellipse cx="397" cy="170.4023" fill="#000000" filter="url(#fj4rfkvpb3lyo)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FFFFFF" filter="url(#fj4rfkvpb3lyo)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #000000; stroke-width: 1.5;" width="255" x="269.5" y="302.3325"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="98" x="279.5" y="323.4712">initialize pointer</text><text fill="#000000" font-family="monospace" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="381.5" y="323.4712">prev_prop</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="13" x="448.5" y="323.4712">to</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="49" x="465.5" y="323.4712">nullptr</text><line style="stroke: #000000; stroke-width: 1.0;" x1="465.5" x2="514.5" y1="325.4712" y2="325.4712"/><rect fill="#FFFFFF" filter="url(#fj4rfkvpb3lyo)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #000000; stroke-width: 1.5;" width="157" x="318.5" y="356.3013"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="98" x="328.5" y="377.4399">initialize integer</text><text fill="#000000" font-family="monospace" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="430.5" y="377.4399">i</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="13" x="441.5" y="377.4399">to</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="7" x="458.5" y="377.4399">0</text><line style="stroke: #000000; stroke-width: 1.0;" x1="458.5" x2="465.5" y1="379.4399" y2="379.4399"/><rect fill="#FFFFFF" filter="url(#fj4rfkvpb3lyo)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #000000; stroke-width: 1.5;" width="465" x="164.5" y="410.27"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="134" x="174.5" y="431.4087">initialize empty vector</text><text fill="#000000" font-family="monospace" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42" x="312.5" y="431.4087">result</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="261" x="358.5" y="431.4087">which can hold pairs of integer and string</text><rect fill="#FFFFFF" filter="url(#fj4rfkvpb3lyo)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #000000; stroke-width: 1.5;" width="184" x="305" y="519.9492"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="20" x="315" y="541.0879">set</text><text fill="#000000" font-family="monospace" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="339" y="541.0879">prop</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="13" x="371" y="541.0879">to</text><text fill="#000000" font-family="monospace" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="91" x="388" y="541.0879">word_break(c)</text><polygon fill="#FFFFFF" filter="url(#fj4rfkvpb3lyo)" points="76.5,573.918,269.5,573.918,281.5,585.918,269.5,597.918,76.5,597.918,64.5,585.918,76.5,573.918" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="177" y="608.1284">yes</text><text fill="#000000" font-family="monospace" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="76.5" y="589.7261">prop</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="10" x="108.5" y="589.7261">is</text><text fill="#000000" font-family="monospace" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="56" x="122.5" y="589.7261">"Newline</text><line style="stroke: #000000; stroke-width: 1.0;" x1="122.5" x2="178.5" y1="591.7261" y2="591.7261"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="5" x="178.5" y="589.7261">"</text><line style="stroke: #000000; stroke-width: 1.0;" x1="178.5" x2="183.5" y1="591.7261" y2="591.7261"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="4" x="183.5" y="589.7261">,</text><text fill="#000000" font-family="monospace" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="21" x="191.5" y="589.7261">"CR</text><line style="stroke: #000000; stroke-width: 1.0;" x1="191.5" x2="212.5" y1="591.7261" y2="591.7261"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="5" x="212.5" y="589.7261">"</text><line style="stroke: #000000; stroke-width: 1.0;" x1="212.5" x2="217.5" y1="591.7261" y2="591.7261"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="12" x="221.5" y="589.7261">or</text><text fill="#000000" font-family="monospace" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="21" x="237.5" y="589.7261">"LF</text><line style="stroke: #000000; stroke-width: 1.0;" x1="237.5" x2="258.5" y1="591.7261" y2="591.7261"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="5" x="258.5" y="589.7261">"</text><line style="stroke: #000000; stroke-width: 1.0;" x1="258.5" x2="263.5" y1="591.7261" y2="591.7261"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="6" x="263.5" y="589.7261">?</text><rect fill="#FFFFFF" filter="url(#fj4rfkvpb3lyo)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #000000; stroke-width: 1.5;" width="188" x="79" y="629.6284"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="52" x="89" y="650.7671">add pair</text><text fill="#000000" font-family="monospace" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="145" y="650.7671">i, prop</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="13" x="198" y="650.7671">to</text><text fill="#000000" font-family="monospace" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42" x="215" y="650.7671">result</text><rect fill="#FFFFFF" filter="url(#fj4rfkvpb3lyo)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #000000; stroke-width: 1.5;" width="177" x="84.5" y="698.5972"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="20" x="94.5" y="719.7358">set</text><text fill="#000000" font-family="monospace" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="118.5" y="719.7358">prev_prop</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="13" x="185.5" y="719.7358">to</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="49" x="202.5" y="719.7358">nullptr</text><line style="stroke: #000000; stroke-width: 1.0;" x1="202.5" x2="251.5" y1="721.7358" y2="721.7358"/><polygon fill="#FFFFFF" filter="url(#fj4rfkvpb3lyo)" points="315.5,573.918,495.5,573.918,507.5,585.918,495.5,597.918,315.5,597.918,303.5,585.918,315.5,573.918" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="409.5" y="608.1284">yes</text><text fill="#000000" font-family="monospace" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="315.5" y="589.7261">prop</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="10" x="347.5" y="589.7261">is</text><text fill="#000000" font-family="monospace" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="49" x="361.5" y="589.7261">"Extend</text><line style="stroke: #000000; stroke-width: 1.0;" x1="361.5" x2="410.5" y1="591.7261" y2="591.7261"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="5" x="410.5" y="589.7261">"</text><line style="stroke: #000000; stroke-width: 1.0;" x1="410.5" x2="415.5" y1="591.7261" y2="591.7261"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="12" x="419.5" y="589.7261">or</text><text fill="#000000" font-family="monospace" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="49" x="435.5" y="589.7261">"Format</text><line style="stroke: #000000; stroke-width: 1.0;" x1="435.5" x2="484.5" y1="591.7261" y2="591.7261"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="5" x="484.5" y="589.7261">"</text><line style="stroke: #000000; stroke-width: 1.0;" x1="484.5" x2="489.5" y1="591.7261" y2="591.7261"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="6" x="489.5" y="589.7261">?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="507.5" y="583.3237">no</text><rect fill="#FFFFFF" filter="url(#fj4rfkvpb3lyo)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #000000; stroke-width: 1.5;" width="188" x="311.5" y="678.0308"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="52" x="321.5" y="699.1694">add pair</text><text fill="#000000" font-family="monospace" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="377.5" y="699.1694">i, prop</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="13" x="430.5" y="699.1694">to</text><text fill="#000000" font-family="monospace" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42" x="447.5" y="699.1694">result</text><rect fill="#FFFFFF" filter="url(#fj4rfkvpb3lyo)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #000000; stroke-width: 1.5;" width="156" x="327.5" y="746.9995"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="20" x="337.5" y="768.1382">set</text><text fill="#000000" font-family="monospace" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="361.5" y="768.1382">prev_prop</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="13" x="428.5" y="768.1382">to</text><text fill="#000000" font-family="monospace" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="445.5" y="768.1382">prop</text><polygon fill="#FFFFFF" filter="url(#fj4rfkvpb3lyo)" points="337.5,629.6284,473.5,629.6284,485.5,641.6284,473.5,653.6284,337.5,653.6284,325.5,641.6284,337.5,629.6284" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="409.5" y="663.8389">yes</text><text fill="#000000" font-family="monospace" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="337.5" y="645.4365">prev_prop</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="10" x="404.5" y="645.4365">is</text><text fill="#000000" font-family="monospace" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="49" x="418.5" y="645.4365">nullptr</text><line style="stroke: #000000; stroke-width: 1.0;" x1="418.5" x2="467.5" y1="647.4365" y2="647.4365"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="6" x="467.5" y="645.4365">?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="485.5" y="639.0342">no</text><polygon fill="#FFFFFF" filter="url(#fj4rfkvpb3lyo)" points="405.5,800.9683,417.5,812.9683,405.5,824.9683,393.5,812.9683,405.5,800.9683" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#fj4rfkvpb3lyo)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #000000; stroke-width: 1.5;" width="188" x="541.5" y="674.6284"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="52" x="551.5" y="695.7671">add pair</text><text fill="#000000" font-family="monospace" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="607.5" y="695.7671">i, prop</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="13" x="660.5" y="695.7671">to</text><text fill="#000000" font-family="monospace" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42" x="677.5" y="695.7671">result</text><rect fill="#FFFFFF" filter="url(#fj4rfkvpb3lyo)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #000000; stroke-width: 1.5;" width="156" x="557.5" y="743.5972"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="20" x="567.5" y="764.7358">set</text><text fill="#000000" font-family="monospace" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="591.5" y="764.7358">prev_prop</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="13" x="658.5" y="764.7358">to</text><text fill="#000000" font-family="monospace" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="675.5" y="764.7358">prop</text><rect fill="#FFFFFF" filter="url(#fj4rfkvpb3lyo)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #000000; stroke-width: 1.5;" width="194" x="300" y="864.9683"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="63" x="310" y="886.1069">increment</text><text fill="#000000" font-family="monospace" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="377" y="886.1069">i</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="85" x="388" y="886.1069">with length of</text><text fill="#000000" font-family="monospace" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="477" y="886.1069">c</text><polygon fill="#FFFFFF" filter="url(#fj4rfkvpb3lyo)" points="322.5,464.2388,471.5,464.2388,483.5,476.2388,471.5,488.2388,322.5,488.2388,310.5,476.2388,322.5,464.2388" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="401" y="498.4492">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="16" x="322.5" y="480.0469">for</text><text fill="#000000" font-family="monospace" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="342.5" y="480.0469">c</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="10" x="353.5" y="480.0469">in</text><text fill="#000000" filter="url(#bj4rfkvpb3lyo0)" font-family="monospace" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="98" x="367.5" y="480.0469">code_points(s)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="6" x="465.5" y="480.0469">?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="296.5" y="473.6445">no</text><rect fill="#FFFFFF" filter="url(#fj4rfkvpb3lyo)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #000000; stroke-width: 1.5;" width="105" x="344.5" y="940.937"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="39" x="354.5" y="962.0757">return</text><text fill="#000000" font-family="monospace" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42" x="397.5" y="962.0757">result</text><ellipse cx="397" cy="1004.9058" fill="none" filter="url(#fj4rfkvpb3lyo)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="397.5" cy="1005.4058" fill="#000000" filter="url(#fj4rfkvpb3lyo)" rx="6" ry="6" style="stroke: none; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="397" x2="397" y1="180.4023" y2="302.3325"/><polygon fill="#000000" points="393,292.3325,397,302.3325,401,292.3325,397,296.3325" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="397" x2="397" y1="336.3013" y2="356.3013"/><polygon fill="#000000" points="393,346.3013,397,356.3013,401,346.3013,397,350.3013" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="397" x2="397" y1="390.27" y2="410.27"/><polygon fill="#000000" points="393,400.27,397,410.27,401,400.27,397,404.27" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="173" x2="173" y1="663.5972" y2="698.5972"/><polygon fill="#000000" points="169,688.5972,173,698.5972,177,688.5972,173,692.5972" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="405.5" x2="405.5" y1="711.9995" y2="746.9995"/><polygon fill="#000000" points="401.5,736.9995,405.5,746.9995,409.5,736.9995,405.5,740.9995" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="405.5" x2="405.5" y1="653.6284" y2="678.0308"/><polygon fill="#000000" points="401.5,668.0308,405.5,678.0308,409.5,668.0308,405.5,672.0308" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="485.5" x2="509.5" y1="641.6284" y2="641.6284"/><polygon fill="#000000" points="505.5,719.4995,509.5,729.4995,513.5,719.4995,509.5,723.4995" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="509.5" x2="509.5" y1="641.6284" y2="812.9683"/><line style="stroke: #000000; stroke-width: 1.5;" x1="509.5" x2="417.5" y1="812.9683" y2="812.9683"/><polygon fill="#000000" points="427.5,808.9683,417.5,812.9683,427.5,816.9683,423.5,812.9683" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="405.5" x2="405.5" y1="780.9683" y2="800.9683"/><polygon fill="#000000" points="401.5,790.9683,405.5,800.9683,409.5,790.9683,405.5,794.9683" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="635.5" x2="635.5" y1="708.5972" y2="743.5972"/><polygon fill="#000000" points="631.5,733.5972,635.5,743.5972,639.5,733.5972,635.5,737.5972" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="173" x2="173" y1="597.918" y2="629.6284"/><polygon fill="#000000" points="169,619.6284,173,629.6284,177,619.6284,173,623.6284" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="173" x2="173" y1="732.5659" y2="844.9683"/><polygon fill="#000000" points="169,834.9683,173,844.9683,177,834.9683,173,838.9683" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="405.5" x2="405.5" y1="597.918" y2="629.6284"/><polygon fill="#000000" points="401.5,619.6284,405.5,629.6284,409.5,619.6284,405.5,623.6284" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="405.5" x2="405.5" y1="824.9683" y2="844.9683"/><polygon fill="#000000" points="401.5,834.9683,405.5,844.9683,409.5,834.9683,405.5,838.9683" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="281.5" x2="303.5" y1="585.918" y2="585.918"/><polygon fill="#000000" points="293.5,581.918,303.5,585.918,293.5,589.918,297.5,585.918" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="397" x2="397" y1="553.918" y2="558.918"/><line style="stroke: #000000; stroke-width: 1.5;" x1="397" x2="173" y1="558.918" y2="558.918"/><line style="stroke: #000000; stroke-width: 1.5;" x1="173" x2="173" y1="558.918" y2="573.918"/><polygon fill="#000000" points="169,563.918,173,573.918,177,563.918,173,567.918" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="507.5" x2="635.5" y1="585.918" y2="585.918"/><line style="stroke: #000000; stroke-width: 1.5;" x1="635.5" x2="635.5" y1="585.918" y2="674.6284"/><polygon fill="#000000" points="631.5,664.6284,635.5,674.6284,639.5,664.6284,635.5,668.6284" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="635.5" x2="635.5" y1="777.5659" y2="844.9683"/><polygon fill="#000000" points="631.5,834.9683,635.5,844.9683,639.5,834.9683,635.5,838.9683" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="173" x2="635.5" y1="844.9683" y2="844.9683"/><line style="stroke: #000000; stroke-width: 1.5;" x1="397" x2="397" y1="844.9683" y2="864.9683"/><polygon fill="#000000" points="393,854.9683,397,864.9683,401,854.9683,397,858.9683" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="397" x2="397" y1="488.2388" y2="519.9492"/><polygon fill="#000000" points="393,509.9492,397,519.9492,401,509.9492,397,513.9492" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="397" x2="397" y1="898.937" y2="908.937"/><line style="stroke: #000000; stroke-width: 1.5;" x1="397" x2="741.5" y1="908.937" y2="908.937"/><polygon fill="#000000" points="737.5,717.6948,741.5,707.6948,745.5,717.6948,741.5,713.6948" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="741.5" x2="741.5" y1="476.2388" y2="908.937"/><line style="stroke: #000000; stroke-width: 1.5;" x1="741.5" x2="483.5" y1="476.2388" y2="476.2388"/><polygon fill="#000000" points="493.5,472.2388,483.5,476.2388,493.5,480.2388,489.5,476.2388" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="310.5" x2="52.5" y1="476.2388" y2="476.2388"/><polygon fill="#000000" points="48.5,703.6948,52.5,713.6948,56.5,703.6948,52.5,707.6948" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="52.5" x2="52.5" y1="476.2388" y2="920.937"/><line style="stroke: #000000; stroke-width: 1.5;" x1="52.5" x2="397" y1="920.937" y2="920.937"/><line style="stroke: #000000; stroke-width: 1.5;" x1="397" x2="397" y1="920.937" y2="940.937"/><polygon fill="#000000" points="393,930.937,397,940.937,401,930.937,397,934.937" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="397" x2="397" y1="444.2388" y2="464.2388"/><polygon fill="#000000" points="393,454.2388,397,464.2388,401,454.2388,397,458.2388" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="397" x2="397" y1="974.9058" y2="994.9058"/><polygon fill="#000000" points="393,984.9058,397,994.9058,401,984.9058,397,988.9058" style="stroke: #000000; stroke-width: 1.0;"/><!--
@startuml
skinparam BackgroundColor White|White
skinparam ArrowColor Black

skinparam NoteBackgroundColor White
skinparam NoteBorderColor Black

skinparam ActivityBackgroundColor White
skinparam ActivityDiamondBackgroundColor White
skinparam ActivityBorderColor Black
skinparam ActivityDiamondBorderColor Black

title **Nuspell - segmentation - //""_preprocess_boundaries(s)""//**\n

start

floating note left
    Preprocesses WB4.

    **""s""** must be a Unicode code point string

    ""assert({(0, "CR"), (1, "LF")} ==""
    ""_preprocess_boundaries("\r\n"));""

    ""assert({(0, "ALetter"), (2, "ALetter")} ==""
    ""_preprocess_boundaries("A\u0308A"));""

    ""assert({(0, "LF"), (1, "Format")} == ""
    ""_preprocess_boundaries("\n\u2060"));""

    ""assert({(0, "Other"), (2, "Other")} ==""
    ""_preprocess_boundaries("\x01\u0308\x01"));""
end note

:initialize pointer **""prev_prop""** to __""nullptr""__;
:initialize integer **""i""** to __""0""__;
:initialize empty vector **""result""** which can hold pairs of integer and string;

while (for **""c""** in <back:skyblue>//""code_points(s)""//</back>?) is (yes)
    :set **""prop""** to //""word_break(c)""//;
    if (**""prop""** is __"""Newline"""__, __"""CR"""__ or __"""LF"""__?) then (yes)
        :add pair **""i, prop""** to **""result""**;
        :set **""prev_prop""** to __""nullptr""__;
    elseif (**""prop""** is __"""Extend"""__ or __"""Format"""__?) then (yes)
        if (**""prev_prop""** is __""nullptr""__?) then (yes)
            :add pair **""i, prop""** to **""result""**;
            :set **""prev_prop""** to **""prop""**;
        else (no)
        endif
    else (no)
        :add pair **""i, prop""** to **""result""**;
        :set **""prev_prop""** to **""prop""**;
    endif
    :increment **""i""** with length of **""c""**;
endwhile (no)
:return **""result""**;

stop

@enduml

PlantUML version 1.2018.06(Mon May 21 12:34:53 CEST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 10.0.2+13-Ubuntu-1ubuntu0.18.04.1
Operating System: Linux
OS Version: 4.15.0-33-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>