diagram {
	title = "function spell"

	io user {
		title = "User"
	}

	database iconv_table {
		title = "ICONV table"
	}

boundary spell {
	title = "spell(word)"

	function call_spell {
		title = "Begin spell()"
	}

	function substring_substitute {
		title = "Substring substitute"
	}

	function trim_trailing_periods {
		title = "Trim trailing periods"
	}

	function count_trailing_periods {
		title = "Count trailing periods"
	}

	function trim_leading_space {
		title = "Trim leading space"
	}

	function classify_capitalization {
		title = "Classify capitalization"
	}

	database abbreviation {
		title = "Is abbreviation"
	}

}
	user -> call_spell {
        	operation = "call spell"
        	data = "word"
	}

	call_spell -> substring_substitute {
		operation = "substitute"
        	data = "word"
	}

	iconv_table -> substring_substitute {
		operation = "substitute"
		data = "(from, to) substitutions"
	}

	substring_substitute -> trim_trailing_periods {
		operation = "trim"
		data = "word"
	}

	substring_substitute -> count_trailing_periods {
		operation = "trim"
		data = "word"
	}

	count_trailing_periods -> abbreviation {
		operation = "store"
		data = "true if count &gt; 0"
	}

	trim_trailing_periods -> trim_leading_space {
		operation = "trim"
		data = "word"
	}

	trim_leading_space -> classify_capitalization {
		operation = "classify"
		data = "word"
	}
}
